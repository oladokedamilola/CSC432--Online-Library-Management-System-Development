<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <title>
        Online Library Management System - {% block title %} {% endblock title %}
    </title>
    <!-- Bootstrap 4.5.2 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.1/aos.css" rel="stylesheet">


    <link rel="icon" href="{% static 'fav.png' %}" type="image/x-icon">
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        .wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .flash-message-container {
            position: fixed;
            top: 60px; /* Adjust this to match the height of your navbar */
            left: 50%;
            transform: translateX(-50%);
            width: 90%; /* Set a standard width */
            max-width: 600px; /* Prevent it from being too wide */
            z-index: 1050; /* Ensure it appears above other elements */
        }
        .flash-message-wrapper {
            padding: 10px;
        }
        .alert {
            margin: 0 auto;
            text-align: center;
            width: 100%;
        }
        /* Default style for flash messages */
.flash-message-container .alert {
    background-color: #f8f9fa; /* Light gray, Bootstrap's default */
    color: #212529; /* Dark text for readability */
    border: 1px solid #dee2e6; /* Subtle border */
}

/* Style for messages with no specific bg color (fallback) */
.flash-message-container .alert:not([class*="alert-"]) {
    background-color: #e2e3e5; /* Subtle gray for undefined types */
    color: #000; /* Black text */
}

        .content {
            flex: 1;
        }
        footer {
            margin-top: auto;
        }
        .cart-indicator {
            position: relative;
        }
        .cart-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background: red;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
        }
        {% block styles %}

        {% endblock styles %}
    </style>
</head>
<body>
    <div class="wrapper">
        {% block nav %}
        <nav class="navbar navbar-expand-lg navbar-dark bg-gradient-custom fixed-top bg-dark">
            <a class="navbar-brand" href="{% url 'home' %}">Online Library Management System</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <!-- Home link is visible to all users, but not on the home page -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'home' %}">Home</a>
                    </li>
        
                    <!-- Books link is visible to all users -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'books' %}">Books</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'genre_books' %}">Genre</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'category_books' %}">Category</a>
                    </li>
        
                    {% if user.is_authenticated %}
                    <!-- Links visible only to logged-in users -->
        
                    <!-- Profile link -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'dashboard' %}">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'search_books' %}">Search</a>
                    </li>
        
                    <!-- Admin link (only for admin users) -->
                    {% if user.is_staff %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'admin:index' %}">Admin</a>
                    </li>
                    {% endif %}
        
                    <!-- Logout link -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'logout' %}">Logout</a>
                    </li>
        
                    {% else %}
                    <!-- Links visible only when the user is not logged in -->
        
                    <!-- Login link -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'login' %}">Login</a>
                    </li>
        
                    <!-- Register link -->
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'register' %}">Register</a>
                    </li>
        
                    {% endif %}
                </ul>
            </div>
        </nav>
        
        {% endblock nav %}
    

        <div class="flash-message-container">
            {% if messages %}
                <div class="flash-message-wrapper">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags|default:"secondary" }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        

        
        {% block content %}
        {% endblock content %}

{% block footer %}
<footer class="bg-dark text-white mt-5 p-4">
    <div class="container">
        <div class="row">
            <!-- Quick Links Section -->
            <div class="col-md-4 mb-3">  <!-- Reduced to col-md-4 -->
                <h5>Quick Links</h5>
                <p>
                    <a href="{% url 'home' %}" class="text-white">Home</a><br>
                    <a href="{% url 'books' %}" class="text-white">Books</a><br>
                    
                </p>
            </div>

            <!-- Contact Section -->
            <div class="col-md-4 mb-3">  <!-- Reduced to col-md-4 -->
                <h5>Contact Us</h5>
                <p>Email: <a href="mailto:info@onlinelibrary.com" class="text-white">info@onlinelibrary.com</a></p>
                <p>Follow us on:</p>
                <a href="#" class="text-white me-2"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-white me-2"><i class="fab fa-twitter"></i></a>
                <a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a>
                <a href="#" class="text-white"><i class="fab fa-linkedin-in"></i></a>
            </div>

            <!-- Newsletter Subscription Section -->
            <div class="col-md-4 text-end mb-3">  <!-- New col-md-4 for alignment -->
                <h5 class="d-inline">Subscribe to Our Newsletter</h5>
                <form action="#" method="post" class="d-inline">
                    {% csrf_token %}
                    <div class="input-group justify-content-end" style="max-width: 300px;">
                        <input type="email" class="form-control" placeholder="Enter your email" required>
                        <button class="btn btn-primary" type="submit">Subscribe</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</footer>

{% endblock footer %}
       
    

    <!-- jQuery, Popper.js, and Bootstrap 4.5.2 JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Full version of jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script> <!-- Bootstrap bundle with Popper.js -->

    <script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Font Awesome Kit -->

    <script>
        // Auto-hide flash message after 7 seconds
        setTimeout(function() {
            document.querySelectorAll('.flash-message-wrapper .alert').forEach(function(alert) {
                alert.classList.remove('show');
                alert.classList.add('fade');
                setTimeout(() => alert.remove(), 150); // Remove from DOM after fade effect
            });
        }, 7000);
    </script>

    {% block extrajs %}
    {% endblock extrajs %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.1/aos.js"></script>
    <script>
        AOS.init();
    </script>

</body>
</html>
